<h3>Making graphic figures and slides</h3>
<p>July 5, 2009</p>
<p>
Journals require graphics in specific file formats with sufficient 
resolution and font sizes. For example, the
<a href="http://www.seg.org">SEG</a>'s
<a
href="http://www.seg.org/SEGportalWEBproject/portals/SEG_Online.portal?_nfpb=true&amp;_pageLabel=pg_gen_content&amp;Doc_Url=prod/SEG-Publications/Pub-Geophysics/instructionstoa.htm">
Geophysics Instructions to Authors)</a> 
specifies:
</p><p>
EPS or TIFF file format.
<br/>
300-600 dpi (dots per inch) for images,
600-1200 dpi for line art.
<br/>
If color, then CMYK (not RGB).
<br/>
8-pt sans-serif fonts for graphic text (e.g., axes labels)
</p><p>
First, which format should we use, EPS or TIFF? For reasons described 
below, my choice is neither. Instead I use PNG images, and convert to 
TIFF when necessary for publication.
</p><p>
The need for graphics in both manuscripts and presentations raises
a second question. Can we use a single graphic in both? For graphics
with text, the answer is almost always no. Text in graphics for 
manuscripts will typically be too small for presentations.
</p>
<h4>Which format?</h4>
<p>
I like image formats. Scalable vector graphic formats like EPS, PDF, 
and SVG permit unlimited zooming without loss of resolution.
In practice, however, no one needs unlimited zooming. A factor of 4 
(400% zoom) is almost always sufficient. So we need only ensure that 
our images have sufficient resolution, not infinite resolution.
</p><p>
Moreover, EPS does not support partial transparency, and none of the
vector formats EPS, PDF, or SVG support 3D graphics, such as those
generated by OpenGL. So an image format may sometimes be the only 
option available.
</p><p>
Note that neither of the two formats EPS and TIFF is supported by 
the program pdflatex. Instead, pdflatex supports JPEG, PNG and PDF 
formats. Among these three, I choose the PNG image format for most
figures.
</p><p>
The PNG format has lossless compression, is widely supported, and
can easily be converted to TIFF if necessary, say, for publication.
For color figures, the RGB PNG format can be easily converted to 
the CMYK TIFF format required by Geophysics.
</p>
<h4>Image resolution and dimensions</h4>
<p>
The Mines Java Toolkit package <code>edu.mines.jtk.mosaic</code> can 
save graphics in PNG format with arbitrary resolution. To facilitate 
zooming up to 400%, I save graphics in compressed PNG images with 
resolution 720 dpi.
</p><p>
So what figure dimensions - width and height - should we use? Many 
figures have a natural aspect ratio, so that the height depends on 
the width, or vice-versa. If we know one dimension, we know the other.
For other figures, we may choose width and height independently.
</p><p>
In manuscripts, figure width is typically the limiting dimension, 
because text column width is typically less than column height. 
For example, Geophysics allows figures with three different widths,
specified in picas. Using 1 pica = 12 pt and 1 inch = 72 pt, these 
widths are:
</p><p>
  1-column = 20 picas = 240 pt ~ 3.33 inches<br/>
4/3-column = 26 picas = 312 pt ~ 4.33 inches<br/>
  2-column = 42 picas = 504 pt ~ 7.00 inches<br/>
</p><p>
The 2-column width is not specified in the SEG Instructions to Authors, 
but Geophysics does apparently accept 2-column figures, and they appear 
to be about 42 picas wide. Note that the 1-column and 2-column widths 
also work well in LaTeX.
</p><p>
In presentations, figure height is typically more limited than width,
because the slide width:height aspect ratio is 4:3 (or higher, for 
wide-screen formats) and because slides often have a title, which 
further limits the height available for graphics. Therefore, graphics 
that fit well in manuscripts may be too tall for slides in presentations. 
And while we can scale any graphics to fit on a slide, this scaling will 
<em>almost always</em> make text too small.
</p>
<h4>Font size</h4>
<p>
As noted above, Geophysics requires 8-pt sans serif fonts for graphic
text, such as axes labels. Legibility in presentations requires that
the nominal text height to be at least 1/25 of slide height. These 
requirements are often conflicting.
</p><p>
To see why, suppose that we make a 1-column figure with width 240 pt.
If the figure height is also 240 pt, then text height for an 8-pt font 
will be less than 8/240 = 1/30 of the graphic height. Less, because a
font size includes extra space above and below a typical character.
So our text is too small for a slide, less than 1/25 of the graphic
height, which can never exceed the slide height.
</p><p>
The disparity is even worse in slides with a title, where graphic
height is significantly less than slide height. It is much worse 
for a two-column figure (again, assuming graphic height = width), 
for then the text height is less than 8/504 = 1/63 of slide height.
</p><p>
Now suppose that the aspect ratio of our graphic matches exactly
the 4:3 ratio of a slide. In this case, the graphic height for a 
1-column figure in geophysics would be 240&times;3/4 = 180 pt, and text
height is approximately 1/22 (~ 8/180) of slide height. By the
1/25 rule, this text is legible, but this is the best case. If we 
add a title the slide or change the aspect ratio of the graphic 
(making it either wider or taller), the text will almost always
become too small for a slide.
</p>
<p>
Here is an example of a PNG image desgned for
<dl class="img first">
  <dt><img src="images/GraphicPrintSmall.png" width="256" alt=""/></dt>
  <dd><em>
    A graphic with text in an 8-pt Arail font, 
    as required for printed manuscripts.
  </em></dd>
</dl>
<dl class="img first">
  <dt><img src="images/GraphicSlideSmall.png" width="256" alt=""/></dt>
  <dd><em>
    A graphic with font size that satisfies the
    1/25 rule for slides.
  </em></dd>
</dl>
</p><p>
In summary, we will rarely be able to use the same graphic text for
both manuscripts and slides. More often, graphic text in manuscripts
will be too small for slides.
</p>
<h4>Computing the font size</h4>
<p>
The Mines Java Toolkit creates graphics in on-screen windows, and 
includes methods to save them in PNG images with higher resolution. 
It also provides methods that enable the font size to be specified
explicitly or computed automatically for either printed figures or 
slides.
</p><p>
Given the width of the on-screen graphic it is easy to compute the
font size to use for that graphic. The equation is simply
</p>
<pre><code>
  fontSizeGraphic = fontSizePrint*widthGraphic/widthPrint
</code></pre>
<p>
For a 1-column figure in Geophysics, 
<code>fontSizePrint</code> = 8 pt and
<code>widthPrint</code> = 240 pt.
</p><p>
For slides, the computation of font size is more complex, in part
because not all of the slide width or height may be available for 
our graphic. Remember that some space may be required for a title
or other elements, or we may want to put two graphics on the same
slide. So we first introduce two parameters:
</p><p>
<code>widthFraction</code> = fraction of slide width available<br/>
<code>heightFraction</code> = fraction of slide height available<br/>
</p><p>
We then compute the font size for our graphic window as follows:
</p>
<pre><code>
widthAvailable = 4*widthFraction
heightAvailable = 3*heightFraction
if (widthGraphic*heightAvailable&gt;heightGraphic*widthAvailable)
  heightScale = (heightGraphic*widthAvailable)/(widthGraphic*heightAvailable)
else
  heightScale = 1
textHeightGraphic = heightGraphic/heightScale/heightFraction/25
fontSizeGraphic = 1.25*textHeightGraphic (factor 1.25 is empirical)
</code></pre>
<p>
This calculation of font size for slides is tedious without a computer, 
and for this reason the class <code>edu.mines.jtk.mosaic.PlotFrame</code> 
in the Mines Java Toolkit will optionally compute the font size for a slide 
(or printed figure) automatically.
</p><p>
The complexity of this calculation contributes to the problem of 
making slides with legible text. We could simply always use fonts
that are too large, but this simple solution wastes space that might 
best be used for other content. For example, axes may be necessary 
in a display of a seismic image, but are usually less important than 
the image itself.
</p><p>
Preserving space for more meaningful content is the reason that
Geophysics specifies a small 8-pt font for text in figures. But, 
as noted above, this font size is almost always too small for 
slides used in presentations.
</p>
<h4>Last steps</h4><p>
Given a 720-dpi PNG image, we must often annotate this graphic
by adding additional text, arrows, boxes, and so on. We may also
need to create a composite of two or more graphics. I use Apple's
Keynote presentation software for Macs to do this sort of thing.
</p><p>
When making a slide in Keynote, I simply drag a PNG image onto the 
slide. For presentations I use the default 1024&times;768 slide size, so
I must scale my high-resolution images to fit the space available. 
We accounted for this scaling in our calculation of font size above, 
so that any text in the graphic after scaling will be legible. I 
then add other content using Keynote's drawing tools and, for 
mathematical symbols and equations, the program LaTeXiT. 
</p><p>
Because creating slides for presentations is a visual process, 
I find that using KeyNote+LaTeXiT in this way is usually more 
efficient than using the Beamer class with LaTeX. For presentations 
at technical conferences, I export my KeyNote slides in PDF format.
</p><p>
I also use Keynote when making figures for printed manuscripts.
In this case, I use custom slides sizes that conform to print
column widths:
</p><p>
  1-column = 1200 pixels<br/>
4/3-column = 1560 pixels<br/>
  2-column = 2520 pixels<br/>
</p><p>
These widths in pixels correspond to a resolution of 360 dpi, which
is sufficient for precise editing, but less than the 720-dpi resolution 
of our images. That's OK, because Keynote retains our images, and will
preserve their 720-dpi resolution when exporting to a PDF document.
</p><p>
Exporting to a PDF also preserves the resolution of any annotation
that I have added to a figure. When I inspect the PDF file using
Apple's Preview application, it will have a resolution of 72 dpi, 
and a large width in inches; e.g., 16.67 inches for a 1-column
figure. In Preview, I can save this image as a TIFF file with a
resolution of 720 dpi. If necessary, with Preview I may also crop
the image and, if color, convert (match) its RGB color profile to 
a CMYK color profile. That's it. I can then submit the TIFF file to 
Geophysics.
</p>
